import{j as e,r as h,R as v}from"./iframe-CKYYnGsb.js";import{B as N}from"./BaseCard-f4AhhNjA.js";import{g as w}from"./geminiService-CuzM82M4.js";import{T as i}from"./locales-CYB-qz6M.js";import"./preload-helper-PPVm8Dsz.js";const P=(t,o="primary",l="General")=>{if(!t)throw new Error("LessonPlan data is null or undefined");if(!t.title||typeof t.duration!="number")throw console.error("Invalid LessonPlan data:",t),new Error("LessonPlan data is missing required fields (title, duration)");return{title:t.title,duration:t.duration,grade:o,gradeLabel:l,procedures:t.procedures||[],teachingPreparation:t.teachingPreparation}},b=({plan:t,className:o,mode:l="table"})=>{const n=P(t),p=()=>e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/5",children:"çŽ¯èŠ‚ / æ—¶é—´"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:"æ•™å­¦å†…å®¹ (Teacher & Student)"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:"è®¾è®¡æ„å›¾ (Justification)"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.procedures.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-4 align-top",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm mb-1",children:s.step}),e.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:["â± ",s.duration," min"]})]}),e.jsxs("td",{className:"px-4 py-4 align-top",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide mb-1",children:"Teacher's Talk"}),e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line leading-relaxed font-serif bg-indigo-50 p-2 rounded-md border border-indigo-100",children:s.teachersTalk})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide mb-1",children:"Student Output"}),e.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line leading-relaxed font-serif bg-green-50 p-2 rounded-md border border-green-100",children:s.studentsOutput})]})]}),e.jsx("td",{className:"px-4 py-4 align-top",children:e.jsxs("div",{className:"text-sm text-gray-600 italic leading-relaxed bg-yellow-50 p-3 rounded-lg border border-yellow-100 h-full",children:["ðŸ’¡ ",s.justification]})})]},r))})]})}),d=()=>e.jsx("div",{className:"space-y-6",children:n.procedures.map((s,r)=>e.jsxs("div",{className:"relative flex items-start group",children:[r!==n.procedures.length-1&&e.jsx("div",{className:"absolute top-10 left-5 bottom-[-24px] w-0.5 bg-gray-200 group-hover:bg-indigo-200 transition-colors"}),e.jsx("div",{className:"relative z-10 flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-white border-2 border-indigo-100 shadow-sm text-indigo-600 font-bold group-hover:border-indigo-500 group-hover:text-indigo-500 transition-colors",children:r+1}),e.jsxs("div",{className:"ml-4 flex-1 bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:s.step}),e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:[s.duration," min"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-indigo-50/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-indigo-700 font-semibold text-sm",children:[e.jsx("span",{children:"ðŸ—£ï¸"})," Teacher"]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:s.teachersTalk})]}),e.jsxs("div",{className:"bg-green-50/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-semibold text-sm",children:[e.jsx("span",{children:"ðŸ‘¥"})," Student"]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:s.studentsOutput})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-500",children:"ðŸ’¡"}),e.jsx("p",{className:"text-sm text-gray-500 italic",children:s.justification})]})]})]},r))}),a=()=>{const s=t.teachingPreparation?.audienceAnalysis;return s?s.map(r=>[r.ageRange,r.proficiency,r.learningStyle].filter(Boolean).join(" â€¢ ")).join(`
`):t.teachingPreparation?.studentAnalysis||""};return e.jsxs(N,{title:n.title,grade:n.grade,gradeLabel:n.gradeLabel,duration:n.duration,className:o,designIntent:a(),children:[l==="table"?p():d(),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Teaching Preparation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("span",{className:"block font-semibold text-gray-600 mb-1",children:"Objectives"}),e.jsx("p",{className:"text-gray-800 leading-relaxed whitespace-pre-line",children:(t.teachingPreparation?.objectives||[]).join(`
`)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("span",{className:"block font-semibold text-gray-600 mb-1",children:"Teaching Aids"}),e.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.teachingPreparation?.teachingAids})]})]})]})]})};b.__docgenInfo={description:"",methods:[],displayName:"LessonPlanCard",props:{plan:{required:!0,tsType:{name:"LessonPlan"},description:""},className:{required:!1,tsType:{name:"string"},description:""},mode:{required:!1,tsType:{name:"union",raw:"'table' | 'flow'",elements:[{name:"literal",value:"'table'"},{name:"literal",value:"'flow'"}]},description:"",defaultValue:{value:"'table'",computed:!1}}}};const j=({topic:t,level:o,grade:l="Grade 3",duration:n,mode:p,autoGenerate:d=!1})=>{const[a,s]=h.useState(!1),[r,g]=h.useState(null),[u,f]=h.useState(null),y=async()=>{s(!0),f(null),g(null);try{const c=await w.generateLessonPlan({topic:t,level:o,grade:l,duration:n,mode:p});g(c)}catch(c){f(c instanceof Error?c.message:i.ERROR_UNKNOWN)}finally{s(!1)}};return v.useEffect(()=>{d&&y()},[d]),e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",fontFamily:"sans-serif"},children:[e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("button",{onClick:y,disabled:a,style:{padding:"10px 20px",backgroundColor:a?"#ccc":"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:a?"not-allowed":"pointer",fontSize:"16px",minWidth:"150px"},children:a?i.BUTTON_GENERATING:i.BUTTON_GENERATE}),a&&e.jsx("span",{style:{color:"#666"},children:i.LABEL_THINKING})]}),u&&e.jsxs("div",{style:{padding:"10px",backgroundColor:"#fee",color:"#c00",borderRadius:"4px",marginBottom:"1rem"},children:[e.jsx("strong",{children:"Error:"})," ",u]}),a&&e.jsxs("div",{style:{border:"1px dashed #ccc",borderRadius:"8px",padding:"40px",textAlign:"center",color:"#666",backgroundColor:"#f9f9f9"},children:[e.jsx("div",{className:"loading-spinner",style:{display:"inline-block",width:"30px",height:"30px",border:"3px solid rgba(0,0,0,0.1)",borderRadius:"50%",borderTopColor:"#4CAF50",animation:"spin 1s ease-in-out infinite",marginBottom:"10px"}}),e.jsx("style",{children:`
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
          `}),e.jsx("div",{children:i.LABEL_THINKING}),e.jsx("div",{style:{fontSize:"0.8em",marginTop:"5px"},children:i.LABEL_GENERATING_FOR.replace("{topic}",t)})]}),!a&&r&&e.jsx(b,{plan:r}),!a&&!r&&!u&&e.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:i.HINT_START})]})},S={title:"AI/AIParsedLesson",component:j,parameters:{layout:"padded",docs:{description:{component:"Demonstrates the integration of GeminiService with BaseCard to display an AI-generated lesson plan."}}},argTypes:{mode:{control:{type:"select"},options:["PWP","PPP"],description:"Teaching methodology mode"},level:{control:{type:"text"},description:"Target student level"},topic:{control:{type:"text"},description:"Lesson topic"},duration:{control:{type:"number",min:10,max:120,step:5},description:"Total lesson duration in minutes"},autoGenerate:{control:"boolean",description:"Automatically generate on load (for demo purposes)"}}},m={args:{topic:"Present Continuous Tense",level:"Primary 3",duration:45,mode:"PPP",autoGenerate:!1}},x={args:{topic:"Photosynthesis",level:"Middle School",duration:60,mode:"PWP",autoGenerate:!0},render:t=>e.jsx(j,{...t})};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    topic: 'Present Continuous Tense',
    level: 'Primary 3',
    duration: 45,
    mode: 'PPP',
    autoGenerate: false
  }
}`,...m.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    topic: 'Photosynthesis',
    level: 'Middle School',
    duration: 60,
    mode: 'PWP',
    autoGenerate: true
  },
  render: args => {
    // We can simulate a persistent loading state or just let the autoGenerate trigger it.
    // However, since autoGenerate calls the real service (mock or real), it will finish eventually.
    // For visual testing of loading state specifically, we might want to mock the service delay to be very long, 
    // or just rely on the interactive behavior.
    return <AIParsedLessonDemo {...args} />;
  }
}`,...x.parameters?.docs?.source}}};const G=["Default","LoadingState"];export{m as Default,x as LoadingState,G as __namedExportsOrder,S as default};
