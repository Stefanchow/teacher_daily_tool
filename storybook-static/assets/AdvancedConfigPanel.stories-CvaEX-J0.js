import{r as i,j as e}from"./iframe-CKYYnGsb.js";import"./preload-helper-PPVm8Dsz.js";const N="_panel_k28g2_1",k="_grid_k28g2_12",b="_formSection_k28g2_24",y="_rightSection_k28g2_30",S="_fieldGroup_k28g2_36",C="_label_k28g2_42",w="_input_k28g2_48",I="_select_k28g2_48",T="_textarea_k28g2_48",L="_error_k28g2_73",O="_sectionTitle_k28g2_79",P="_uploadArea_k28g2_90",G="_uploadIcon_k28g2_109",$="_uploadText_k28g2_115",A="_previewContainer_k28g2_120",E="_previewImage_k28g2_128",B="_deleteButton_k28g2_134",R="_toggleContainer_k28g2_152",U="_toggleOption_k28g2_161",D="_active_k28g2_171",W="_toggleSlider_k28g2_176",J="_right_k28g2_30",a={panel:N,grid:k,formSection:b,rightSection:y,fieldGroup:S,label:C,input:w,select:I,textarea:T,error:L,sectionTitle:O,uploadArea:P,uploadIcon:G,uploadText:$,previewContainer:A,previewImage:E,deleteButton:B,toggleContainer:R,toggleOption:U,active:D,toggleSlider:W,right:J},h="lesson_config_draft",x=()=>{const[r,c]=i.useState({subject:"",grade:"",duration:45,words:"",sentences:"",layout:"detailed",image:null}),[l,_]=i.useState({}),[d,m]=i.useState(null);i.useEffect(()=>{const t=localStorage.getItem(h);if(t)try{const s=JSON.parse(t);c(o=>({...o,...s,image:null}))}catch(s){console.error("Failed to load draft",s)}},[]),i.useEffect(()=>{const t={...r,image:void 0};localStorage.setItem(h,JSON.stringify(t))},[r]);const j=(t,s)=>{let o="";t==="subject"&&!s&&(o="请输入主题"),t==="grade"&&!s&&(o="请选择年级"),t==="duration"&&(s<15||s>120)&&(o="时长需在15-120分钟之间"),_(p=>({...p,[t]:o}))},n=(t,s)=>{c(o=>({...o,[t]:s})),j(t,s)},v=t=>{const s=t.target.files?.[0];if(s){if(s.size>10*1024*1024){alert("文件大小不能超过10MB");return}c(p=>({...p,image:s}));const o=URL.createObjectURL(s);m(o)}},f=()=>{c(t=>({...t,image:null})),d&&URL.revokeObjectURL(d),m(null)};return e.jsx("div",{className:a.panel,children:e.jsxs("div",{className:a.grid,children:[e.jsxs("div",{className:a.formSection,children:[e.jsx("h3",{className:a.sectionTitle,children:"基础信息"}),e.jsxs("div",{className:a.fieldGroup,children:[e.jsx("label",{className:a.label,children:"主题 (Subject) *"}),e.jsx("input",{className:a.input,value:r.subject,onChange:t=>n("subject",t.target.value),placeholder:"例如：Water Cycle",maxLength:100}),l.subject&&e.jsx("span",{className:a.error,children:l.subject})]}),e.jsxs("div",{className:a.fieldGroup,children:[e.jsx("label",{className:a.label,children:"年级 (Grade) *"}),e.jsxs("select",{className:a.select,value:r.grade,onChange:t=>n("grade",t.target.value),children:[e.jsx("option",{value:"",children:"请选择年级"}),e.jsx("optgroup",{label:"小学",children:[1,2,3,4,5,6].map(t=>e.jsxs("option",{value:`primary-${t}`,children:[t,"年级"]},`p${t}`))}),e.jsx("optgroup",{label:"初中",children:[7,8,9].map(t=>e.jsxs("option",{value:`middle-${t}`,children:[t-6,"年级"]},`m${t}`))}),e.jsx("optgroup",{label:"高中",children:[10,11,12].map(t=>e.jsxs("option",{value:`high-${t}`,children:[t-9,"年级"]},`h${t}`))})]}),l.grade&&e.jsx("span",{className:a.error,children:l.grade})]}),e.jsxs("div",{className:a.fieldGroup,children:[e.jsx("label",{className:a.label,children:"时长 (Minutes)"}),e.jsx("input",{type:"number",className:a.input,value:r.duration,onChange:t=>n("duration",parseInt(t.target.value)),min:15,max:120}),l.duration&&e.jsx("span",{className:a.error,children:l.duration})]}),e.jsxs("div",{className:a.fieldGroup,children:[e.jsx("label",{className:a.label,children:"目标词汇 (Target Words)"}),e.jsx("textarea",{className:a.textarea,value:r.words,onChange:t=>n("words",t.target.value),placeholder:"请输入目标词汇，换行分隔"})]}),e.jsxs("div",{className:a.fieldGroup,children:[e.jsx("label",{className:a.label,children:"目标句型 (Target Sentences)"}),e.jsx("textarea",{className:a.textarea,value:r.sentences,onChange:t=>n("sentences",t.target.value),placeholder:"请输入目标句型，换行分隔"})]})]}),e.jsxs("div",{className:a.rightSection,children:[e.jsxs("div",{children:[e.jsx("h3",{className:a.sectionTitle,children:"版式选择"}),e.jsxs("div",{className:a.toggleContainer,onClick:()=>n("layout",r.layout==="detailed"?"simple":"detailed"),children:[e.jsx("div",{className:`${a.toggleSlider} ${r.layout==="simple"?a.right:""}`}),e.jsx("div",{className:`${a.toggleOption} ${r.layout==="detailed"?a.active:""}`,children:"专业详案版"}),e.jsx("div",{className:`${a.toggleOption} ${r.layout==="simple"?a.active:""}`,children:"精简流程版"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:a.sectionTitle,children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21 15 16 10 5 21"})]}),"课本上传"]}),d?e.jsxs("div",{className:a.previewContainer,children:[e.jsx("img",{src:d,alt:"Preview",className:a.previewImage}),e.jsx("button",{className:a.deleteButton,onClick:f,children:"×"})]}):e.jsxs("label",{className:a.uploadArea,children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/png",hidden:!0,onChange:v}),e.jsxs("svg",{className:a.uploadIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"17 8 12 3 7 8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsxs("span",{className:a.uploadText,children:["点击或拖拽上传课本",e.jsx("br",{}),"支持 JPG/PNG (Max 10MB)"]})]})]})]})]})})};x.__docgenInfo={description:"",methods:[],displayName:"AdvancedConfigPanel"};const F={title:"Config/AdvancedConfigPanel",component:x,tags:["autodocs"],parameters:{layout:"centered",backgrounds:{default:"light"}}},g={},u={decorators:[r=>(localStorage.setItem("lesson_config_draft",JSON.stringify({subject:"Ancient Civilizations",grade:"middle-7",duration:90,words:"Pyramid, Pharaoh, Nile",sentences:"The Nile River was essential for Egyptian agriculture.",layout:"detailed"})),e.jsx(r,{}))]};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:"{}",...g.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  decorators: [Story => {
    // Simulate existing local storage data
    localStorage.setItem('lesson_config_draft', JSON.stringify({
      subject: 'Ancient Civilizations',
      grade: 'middle-7',
      duration: 90,
      words: 'Pyramid, Pharaoh, Nile',
      sentences: 'The Nile River was essential for Egyptian agriculture.',
      layout: 'detailed'
    }));
    return <Story />;
  }]
}`,...u.parameters?.docs?.source}}};const H=["Default","WithPreloadedData"];export{g as Default,u as WithPreloadedData,H as __namedExportsOrder,F as default};
